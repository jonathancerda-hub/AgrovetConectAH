<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Manual de Desarrollador - AgrovetConectAH</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', 'Consolas', monospace;
            line-height: 1.6;
            color: #e0e0e0;
            background: #1a1a2e;
            min-height: 100vh;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            background: linear-gradient(135deg, #0f3460 0%, #16213e 100%);
            padding: 40px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            margin-bottom: 30px;
            border: 1px solid #e94560;
        }

        header h1 {
            color: #e94560;
            font-size: 2.8em;
            margin-bottom: 10px;
            font-weight: 700;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }

        header .subtitle {
            color: #00d9ff;
            font-size: 1.3em;
            margin-bottom: 5px;
        }

        header .tech-stack {
            color: #a0a0a0;
            font-size: 0.9em;
            margin-top: 15px;
            padding: 10px;
            background: rgba(0,0,0,0.3);
            border-radius: 5px;
            border-left: 3px solid #00d9ff;
        }

        nav {
            background: #16213e;
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 30px;
            position: sticky;
            top: 20px;
            border: 1px solid #0f3460;
        }

        nav h3 {
            color: #e94560;
            margin-bottom: 20px;
            font-size: 1.2em;
        }

        nav ul {
            list-style: none;
        }

        nav ul li {
            margin: 12px 0;
        }

        nav ul li a {
            color: #00d9ff;
            text-decoration: none;
            padding: 10px 15px;
            display: block;
            border-radius: 5px;
            transition: all 0.3s;
            border-left: 3px solid transparent;
        }

        nav ul li a:hover {
            background: #0f3460;
            border-left-color: #e94560;
            transform: translateX(5px);
        }

        .content {
            background: #16213e;
            padding: 40px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            margin-bottom: 30px;
            border: 1px solid #0f3460;
        }

        h2 {
            color: #e94560;
            margin-top: 30px;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #e94560;
            font-size: 2em;
        }

        h3 {
            color: #00d9ff;
            margin-top: 25px;
            margin-bottom: 15px;
            font-size: 1.5em;
        }

        h4 {
            color: #a0d8ef;
            margin-top: 20px;
            margin-bottom: 12px;
            font-size: 1.2em;
        }

        .code-box {
            background: #0f0f23;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            border-left: 4px solid #00d9ff;
            overflow-x: auto;
        }

        .code-box pre {
            color: #a9fef7;
            font-family: 'Courier New', monospace;
            margin: 0;
            white-space: pre-wrap;
            word-wrap: break-word;
        }

        .code-inline {
            background: #0f0f23;
            padding: 3px 8px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            color: #00d9ff;
            border: 1px solid #1a1a2e;
        }

        .warning-box {
            background: rgba(255, 152, 0, 0.1);
            padding: 20px;
            border-radius: 8px;
            border-left: 4px solid #ff9800;
            margin: 20px 0;
            color: #ffcc80;
        }

        .info-box {
            background: rgba(0, 217, 255, 0.1);
            padding: 20px;
            border-radius: 8px;
            border-left: 4px solid #00d9ff;
            margin: 20px 0;
            color: #a0d8ef;
        }

        .success-box {
            background: rgba(76, 175, 80, 0.1);
            padding: 20px;
            border-radius: 8px;
            border-left: 4px solid #4caf50;
            margin: 20px 0;
            color: #a5d6a7;
        }

        .feature-box {
            background: rgba(233, 69, 96, 0.1);
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border-left: 4px solid #e94560;
        }

        ul, ol {
            margin-left: 30px;
            margin-bottom: 20px;
            color: #c0c0c0;
        }

        li {
            margin: 10px 0;
            line-height: 1.8;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 25px 0;
            background: #0f0f23;
            border-radius: 8px;
            overflow: hidden;
        }

        th, td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid #2a2a4e;
        }

        th {
            background: #e94560;
            color: white;
            font-weight: 700;
        }

        tr:hover {
            background: rgba(233, 69, 96, 0.1);
        }

        .tech-card {
            background: #0f0f23;
            padding: 25px;
            border-radius: 10px;
            margin: 15px 0;
            border-left: 4px solid #00d9ff;
            transition: transform 0.3s;
        }

        .tech-card:hover {
            transform: translateX(10px);
            border-left-color: #e94560;
        }

        .tech-card h4 {
            color: #e94560;
            margin-bottom: 10px;
        }

        .architecture-diagram {
            background: #0f0f23;
            padding: 30px;
            border-radius: 10px;
            margin: 25px 0;
            text-align: center;
            border: 2px dashed #00d9ff;
        }

        .layer {
            background: rgba(233, 69, 96, 0.2);
            padding: 20px;
            margin: 15px 0;
            border-radius: 8px;
            border: 1px solid #e94560;
        }

        .layer h4 {
            color: #e94560;
            margin-bottom: 12px;
        }

        .endpoint-card {
            background: #0f0f23;
            padding: 15px;
            margin: 10px 0;
            border-radius: 8px;
            border-left: 4px solid #4caf50;
        }

        .endpoint-card .method {
            display: inline-block;
            padding: 5px 12px;
            border-radius: 4px;
            font-weight: bold;
            margin-right: 10px;
            font-size: 0.9em;
        }

        .method.get { background: #4caf50; color: white; }
        .method.post { background: #2196f3; color: white; }
        .method.put { background: #ff9800; color: white; }
        .method.delete { background: #f44336; color: white; }

        footer {
            background: #16213e;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            text-align: center;
            color: #a0a0a0;
            border: 1px solid #0f3460;
        }

        .grid-2 {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .badge {
            display: inline-block;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.85em;
            margin: 5px;
            font-weight: 600;
        }

        .badge.frontend { background: #61dafb; color: #000; }
        .badge.backend { background: #68a063; color: #fff; }
        .badge.database { background: #336791; color: #fff; }
        .badge.tool { background: #ff9800; color: #fff; }

        @media print {
            body { background: white; color: black; }
            .container { max-width: 100%; }
            nav { display: none; }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üîß Manual de Desarrollador</h1>
            <p class="subtitle">AgrovetConectAH - Sistema de Gesti√≥n de Recursos Humanos</p>
            <div class="tech-stack">
                <strong>Stack Tecnol√≥gico:</strong> React 19 ‚Ä¢ Node.js ‚Ä¢ Express ‚Ä¢ PostgreSQL ‚Ä¢ Material-UI v7 ‚Ä¢ JWT
            </div>
            <p style="margin-top: 15px; color: #888; font-size: 0.9em;">Versi√≥n 1.0 | Build 2025.11.17</p>
        </header>

        <div style="display: grid; grid-template-columns: 280px 1fr; gap: 30px;">
            <nav>
                <h3>üìë √çndice</h3>
                <ul>
                    <li><a href="#stack">Stack Tecnol√≥gico</a></li>
                    <li><a href="#arquitectura">Arquitectura</a></li>
                    <li><a href="#estructura">Estructura del Proyecto</a></li>
                    <li><a href="#backend">Backend (API)</a></li>
                    <li><a href="#frontend">Frontend (React)</a></li>
                    <li><a href="#database">Base de Datos</a></li>
                    <li><a href="#apis">APIs y Endpoints</a></li>
                    <li><a href="#autenticacion">Autenticaci√≥n</a></li>
                    <li><a href="#deployment">Deployment</a></li>
                    <li><a href="#desarrollo">Gu√≠a de Desarrollo</a></li>
                </ul>
            </nav>

            <main>
                <div class="content" id="stack">
                    <h2>üõ†Ô∏è Stack Tecnol√≥gico Completo</h2>

                    <h3>Frontend</h3>
                    <div class="grid-2">
                        <div class="tech-card">
                            <h4>‚öõÔ∏è React 19.2.0</h4>
                            <p>Framework principal para la interfaz de usuario</p>
                            <ul>
                                <li>Hooks modernos (useState, useEffect, useMemo)</li>
                                <li>Context API para estado global</li>
                                <li>React Router para navegaci√≥n</li>
                                <li>Componentes funcionales</li>
                            </ul>
                        </div>

                        <div class="tech-card">
                            <h4>üé® Material-UI v7.3.4</h4>
                            <p>Librer√≠a de componentes UI</p>
                            <ul>
                                <li>Theme personalizado</li>
                                <li>DataGrid para tablas</li>
                                <li>Date Pickers localizados</li>
                                <li>Icons Material</li>
                            </ul>
                        </div>

                        <div class="tech-card">
                            <h4>‚ö° Vite 7.1.9</h4>
                            <p>Build tool y dev server</p>
                            <ul>
                                <li>Hot Module Replacement (HMR)</li>
                                <li>Build optimizado</li>
                                <li>Desarrollo ultra-r√°pido</li>
                            </ul>
                        </div>

                        <div class="tech-card">
                            <h4>üì¶ Librer√≠as Adicionales</h4>
                            <ul>
                                <li><strong>Axios 1.13.2:</strong> Cliente HTTP</li>
                                <li><strong>React Hook Form 7.65.0:</strong> Gesti√≥n de formularios</li>
                                <li><strong>Moment.js 2.30.1:</strong> Manejo de fechas</li>
                                <li><strong>Zustand 5.0.8:</strong> Estado global ligero</li>
                                <li><strong>React Big Calendar:</strong> Vista de calendario</li>
                                <li><strong>Recharts 2.12.7:</strong> Gr√°ficos y estad√≠sticas</li>
                            </ul>
                        </div>
                    </div>

                    <h3>Backend</h3>
                    <div class="grid-2">
                        <div class="tech-card">
                            <h4>üü¢ Node.js + Express 4.18.2</h4>
                            <p>Servidor API RESTful</p>
                            <ul>
                                <li>ES Modules (import/export)</li>
                                <li>Middleware personalizado</li>
                                <li>Manejo de errores centralizado</li>
                                <li>CORS configurado</li>
                            </ul>
                        </div>

                        <div class="tech-card">
                            <h4>üîê Autenticaci√≥n</h4>
                            <ul>
                                <li><strong>JWT 9.0.2:</strong> Tokens de sesi√≥n</li>
                                <li><strong>Bcrypt 5.1.1:</strong> Hash de contrase√±as</li>
                                <li><strong>Express Validator 7.0.1:</strong> Validaci√≥n de datos</li>
                            </ul>
                        </div>

                        <div class="tech-card">
                            <h4>‚öôÔ∏è Configuraci√≥n</h4>
                            <ul>
                                <li><strong>Dotenv 16.4.1:</strong> Variables de entorno</li>
                                <li><strong>CORS 2.8.5:</strong> Seguridad de origen cruzado</li>
                                <li><strong>Node --watch:</strong> Auto-restart en desarrollo</li>
                            </ul>
                        </div>
                    </div>

                    <h3>Base de Datos</h3>
                    <div class="tech-card">
                        <h4>üêò PostgreSQL 16</h4>
                        <p>Base de datos relacional en Render (Oregon)</p>
                        <ul>
                            <li><strong>Driver:</strong> node-postgres (pg) 8.11.3</li>
                            <li><strong>Pool de conexiones:</strong> M√°ximo 20 conexiones</li>
                            <li><strong>SSL:</strong> Habilitado con certificado</li>
                            <li><strong>Migraciones:</strong> Scripts SQL versionados</li>
                            <li><strong>Tablas:</strong> 19 tablas principales</li>
                        </ul>
                    </div>

                    <h3>Herramientas de Desarrollo</h3>
                    <div class="grid-2">
                        <div class="tech-card">
                            <h4>Version Control</h4>
                            <ul>
                                <li>Git + GitHub</li>
                                <li>Branching strategy: main</li>
                            </ul>
                        </div>

                        <div class="tech-card">
                            <h4>IDE & Tools</h4>
                            <ul>
                                <li>VS Code</li>
                                <li>ESLint (linting)</li>
                                <li>Prettier (formatting)</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="content" id="arquitectura">
                    <h2>üèóÔ∏è Arquitectura del Software</h2>

                    <div class="info-box">
                        <strong>Patr√≥n Arquitect√≥nico:</strong> Cliente-Servidor con API RESTful
                    </div>

                    <div class="architecture-diagram">
                        <h3 style="color: #00d9ff; margin-bottom: 30px;">Arquitectura de 3 Capas</h3>
                        
                        <div class="layer">
                            <h4>üåê Capa de Presentaci√≥n (Frontend)</h4>
                            <p>React 19 + Material-UI + Vite</p>
                            <p style="color: #888; margin-top: 10px;">Puerto: 5173 (desarrollo) | Nginx (producci√≥n)</p>
                        </div>

                        <div style="text-align: center; margin: 20px 0;">
                            <span style="color: #00d9ff; font-size: 1.5em;">‚¨áÔ∏è HTTP/HTTPS ‚¨áÔ∏è</span>
                        </div>

                        <div class="layer">
                            <h4>‚öôÔ∏è Capa de L√≥gica de Negocio (Backend)</h4>
                            <p>Node.js + Express + JWT</p>
                            <p style="color: #888; margin-top: 10px;">Puerto: 3001 | API RESTful</p>
                        </div>

                        <div style="text-align: center; margin: 20px 0;">
                            <span style="color: #00d9ff; font-size: 1.5em;">‚¨áÔ∏è SQL ‚¨áÔ∏è</span>
                        </div>

                        <div class="layer">
                            <h4>üíæ Capa de Datos (Database)</h4>
                            <p>PostgreSQL 16 en Render Cloud</p>
                            <p style="color: #888; margin-top: 10px;">Conexi√≥n SSL | Pool de 20 conexiones</p>
                        </div>
                    </div>

                    <h3>üîÑ Flujo de Datos</h3>
                    <div class="code-box">
<pre>
1. Usuario interact√∫a con React Component
   ‚¨áÔ∏è
2. Component ejecuta Service (axios)
   ‚¨áÔ∏è
3. Service hace HTTP request a API
   ‚¨áÔ∏è
4. Express Middleware valida JWT
   ‚¨áÔ∏è
5. Router direcciona a Controller
   ‚¨áÔ∏è
6. Controller ejecuta l√≥gica de negocio
   ‚¨áÔ∏è
7. Query a PostgreSQL v√≠a Pool
   ‚¨áÔ∏è
8. DB retorna datos
   ‚¨áÔ∏è
9. Controller formatea respuesta JSON
   ‚¨áÔ∏è
10. Service recibe data
   ‚¨áÔ∏è
11. Component actualiza estado (useState)
   ‚¨áÔ∏è
12. React re-renderiza UI
</pre>
                    </div>

                    <h3>üìÇ Patr√≥n MVC Adaptado</h3>
                    <table>
                        <tr>
                            <th>Capa</th>
                            <th>Ubicaci√≥n</th>
                            <th>Responsabilidad</th>
                        </tr>
                        <tr>
                            <td><strong>Model</strong></td>
                            <td>Database (PostgreSQL)</td>
                            <td>Esquema de datos, relaciones, constraints</td>
                        </tr>
                        <tr>
                            <td><strong>View</strong></td>
                            <td>src/features/*/components/*.jsx</td>
                            <td>UI, rendering, eventos de usuario</td>
                        </tr>
                        <tr>
                            <td><strong>Controller</strong></td>
                            <td>backend/src/controllers/*.js</td>
                            <td>L√≥gica de negocio, validaciones, respuestas</td>
                        </tr>
                        <tr>
                            <td><strong>Routes</strong></td>
                            <td>backend/src/routes/*.js</td>
                            <td>Mapeo de endpoints a controllers</td>
                        </tr>
                        <tr>
                            <td><strong>Services</strong></td>
                            <td>src/services/*.service.js</td>
                            <td>Comunicaci√≥n HTTP, transformaci√≥n de datos</td>
                        </tr>
                    </table>
                </div>

                <div class="content" id="estructura">
                    <h2>üìÅ Estructura del Proyecto</h2>

                    <h3>Frontend Structure</h3>
                    <div class="code-box">
<pre>
reac/
‚îú‚îÄ‚îÄ public/                    # Assets est√°ticos
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ components/            # Componentes compartidos
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Sidebar.jsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ TopBar.jsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Layout.jsx
‚îÇ   ‚îú‚îÄ‚îÄ features/              # M√≥dulos por funcionalidad
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Login.jsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Register.jsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ vacations/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ VacationsPage.jsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ components/
‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ RequestForm.jsx
‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ RequestsList.jsx
‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ AvailableDays.jsx
‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ VacationCalendar.jsx
‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ ApprovalDashboard.jsx
‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ DashboardRRHH.jsx
‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ ControlVacacionesEmpleado.jsx
‚îÇ   ‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ HistorialVacaciones.jsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ employees/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ GestionEmpleados.jsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ portal/
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ Portal.jsx
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ NewBulletinForm.jsx
‚îÇ   ‚îú‚îÄ‚îÄ services/              # API clients
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ api.js             # Axios instance
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth.service.js
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ empleados.service.js
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ publicaciones.service.js
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ notificaciones.service.js
‚îÇ   ‚îú‚îÄ‚îÄ utils/                 # Utilidades
‚îÇ   ‚îú‚îÄ‚îÄ App.jsx                # Component principal
‚îÇ   ‚îú‚îÄ‚îÄ main.jsx               # Entry point
‚îÇ   ‚îî‚îÄ‚îÄ index.css              # Estilos globales
‚îú‚îÄ‚îÄ .env                       # Variables de entorno
‚îú‚îÄ‚îÄ vite.config.js             # Configuraci√≥n Vite
‚îî‚îÄ‚îÄ package.json               # Dependencies
</pre>
                    </div>

                    <h3>Backend Structure</h3>
                    <div class="code-box">
<pre>
backend/
‚îú‚îÄ‚îÄ database/
‚îÇ   ‚îî‚îÄ‚îÄ migrations/            # Scripts SQL
‚îÇ       ‚îú‚îÄ‚îÄ 01_initial_schema.sql
‚îÇ       ‚îú‚îÄ‚îÄ 02_usuarios.sql
‚îÇ       ‚îú‚îÄ‚îÄ 03_empleados.sql
‚îÇ       ‚îú‚îÄ‚îÄ 04_publicaciones.sql
‚îÇ       ‚îú‚îÄ‚îÄ 05_sistema_vacaciones.sql
‚îÇ       ‚îú‚îÄ‚îÄ 06_fix_vacaciones.sql
‚îÇ       ‚îî‚îÄ‚îÄ 07_tablas_adicionales.sql
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ controllers/           # L√≥gica de negocio
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth.controller.js
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ empleados.controller.js
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ publicaciones.controller.js
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ notificaciones.controller.js
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ vacaciones.controller.js
‚îÇ   ‚îú‚îÄ‚îÄ routes/                # Definici√≥n de endpoints
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth.routes.js
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ empleados.routes.js
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ publicaciones.routes.js
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ notificaciones.routes.js
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ vacaciones.routes.js
‚îÇ   ‚îú‚îÄ‚îÄ middleware/            # Middleware personalizado
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ auth.js            # Verificaci√≥n JWT
‚îÇ   ‚îú‚îÄ‚îÄ services/              # Servicios de negocio
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ vacaciones.service.js
‚îÇ   ‚îú‚îÄ‚îÄ db.js                  # Pool PostgreSQL
‚îÇ   ‚îî‚îÄ‚îÄ server.js              # Entry point
‚îú‚îÄ‚îÄ .env                       # Variables de entorno
‚îî‚îÄ‚îÄ package.json               # Dependencies
</pre>
                    </div>

                    <h3>Convenciones de C√≥digo</h3>
                    <div class="feature-box">
                        <h4>Naming Conventions</h4>
                        <ul>
                            <li><strong>Components:</strong> PascalCase (ej. <code class="code-inline">DashboardRRHH.jsx</code>)</li>
                            <li><strong>Services:</strong> camelCase + .service.js (ej. <code class="code-inline">empleados.service.js</code>)</li>
                            <li><strong>Controllers:</strong> camelCase + .controller.js</li>
                            <li><strong>Variables:</strong> camelCase</li>
                            <li><strong>Constants:</strong> UPPER_SNAKE_CASE</li>
                            <li><strong>Database tables:</strong> snake_case plural</li>
                        </ul>
                    </div>
                </div>

                <div class="content" id="backend">
                    <h2>‚öôÔ∏è Backend - API REST</h2>

                    <h3>Configuraci√≥n del Servidor</h3>
                    <div class="code-box">
<pre>
// backend/src/server.js
import express from 'express';
import cors from 'cors';
import dotenv from 'dotenv';

dotenv.config();

const app = express();
const PORT = process.env.PORT || 3001;

// Middleware
app.use(cors({ origin: process.env.CORS_ORIGIN }));
app.use(express.json());

// Routes
app.use('/api/auth', authRoutes);
app.use('/api/empleados', empleadosRoutes);
app.use('/api/publicaciones', publicacionesRoutes);
app.use('/api/notificaciones', notificacionesRoutes);
app.use('/api/vacaciones', vacacionesRoutes);

// Health check
app.get('/health', (req, res) => {
  res.json({ status: 'OK', database: 'PostgreSQL' });
});

app.listen(PORT, () => {
  console.log(`‚úÖ Servidor corriendo en puerto ${PORT}`);
});
</pre>
                    </div>

                    <h3>Middleware de Autenticaci√≥n</h3>
                    <div class="code-box">
<pre>
// backend/src/middleware/auth.js
import jwt from 'jsonwebtoken';

export const authenticateToken = (req, res, next) => {
  const authHeader = req.headers['authorization'];
  const token = authHeader && authHeader.split(' ')[1];

  if (!token) {
    return res.status(401).json({ error: 'Token no proporcionado' });
  }

  jwt.verify(token, process.env.JWT_SECRET, (err, user) => {
    if (err) {
      return res.status(403).json({ error: 'Token inv√°lido' });
    }
    req.user = user;
    next();
  });
};
</pre>
                    </div>

                    <h3>Ejemplo de Controller</h3>
                    <div class="code-box">
<pre>
// backend/src/controllers/empleados.controller.js
import { query } from '../db.js';

export const getEmpleados = async (req, res) => {
  try {
    const result = await query(`
      SELECT 
        e.id, e.dni, e.nombres, e.apellidos,
        e.email, e.telefono, e.puesto, e.area,
        e.dias_vacaciones, e.estado
      FROM empleados e
      WHERE e.estado != 'Cesado'
      ORDER BY e.nombres
    `);
    
    res.json(result.rows);
  } catch (error) {
    console.error('Error:', error);
    res.status(500).json({ error: 'Error al obtener empleados' });
  }
};
</pre>
                    </div>
                </div>

                <div class="content" id="frontend">
                    <h2>‚öõÔ∏è Frontend - React Application</h2>

                    <h3>Configuraci√≥n Principal</h3>
                    <div class="code-box">
<pre>
// src/App.jsx
import { useState } from 'react';
import { ThemeProvider, createTheme } from '@mui/material';
import Sidebar from './components/Sidebar';
import TopBar from './components/TopBar';
import Portal from './features/portal/Portal';

const theme = createTheme({
  palette: {
    primary: { main: '#1976d2' },
    secondary: { main: '#dc004e' },
  },
});

function App() {
  const [currentView, setCurrentView] = useState('portal');
  const [user, setUser] = useState(null);

  return (
    &lt;ThemeProvider theme={theme}&gt;
      &lt;Box sx={{ display: 'flex' }}&gt;
        &lt;Sidebar onMenuClick={setCurrentView} /&gt;
        &lt;Box sx={{ flexGrow: 1 }}&gt;
          &lt;TopBar user={user} /&gt;
          {/* Render current view */}
        &lt;/Box&gt;
      &lt;/Box&gt;
    &lt;/ThemeProvider&gt;
  );
}
</pre>
                    </div>

                    <h3>Service Pattern</h3>
                    <div class="code-box">
<pre>
// src/services/empleados.service.js
import api from './api';

export const empleadosService = {
  getAll: async () => {
    const response = await api.get('/empleados');
    return response.data;
  },

  getById: async (id) => {
    const response = await api.get(`/empleados/${id}`);
    return response.data;
  },

  create: async (empleadoData) => {
    const response = await api.post('/empleados', empleadoData);
    return response.data;
  },

  update: async (id, empleadoData) => {
    const response = await api.put(`/empleados/${id}`, empleadoData);
    return response.data;
  },

  delete: async (id) => {
    const response = await api.delete(`/empleados/${id}`);
    return response.data;
  },
};
</pre>
                    </div>

                    <h3>Component Pattern</h3>
                    <div class="code-box">
<pre>
// src/features/employees/GestionEmpleados.jsx
import { useState, useEffect } from 'react';
import { empleadosService } from '../../services/empleados.service';
import { DataGrid } from '@mui/x-data-grid';

export default function GestionEmpleados() {
  const [empleados, setEmpleados] = useState([]);
  const [loading, setLoading] = useState(true);
  const [openDialog, setOpenDialog] = useState(false);
  const [editingEmpleado, setEditingEmpleado] = useState(null);
  const [puestos, setPuestos] = useState([]);
  const [areas, setAreas] = useState([]);
  const [supervisores, setSupervisores] = useState([]);
  const [tiposTrabajador, setTiposTrabajador] = useState([]);
  const [formData, setFormData] = useState({
    dni: '',
    nombres: '',
    apellidos: '',
    email: '',
    telefono: '',
    puesto_id: '',
    area_id: '',
    supervisor_id: '',
    tipo_trabajador_id: 1,
    fecha_ingreso: new Date().toISOString().split('T')[0],
    fecha_nacimiento: '',
    direccion: '',
    dias_vacaciones: 30,
    activo: true,
    password: ''
  });

  useEffect(() => {
    fetchData();
  }, []);

  const fetchData = async () => {
    try {
      const [empleadosData, puestosData, areasData] = await Promise.all([
        empleadosService.getAll(),
        empleadosService.getPuestos(),
        empleadosService.getAreas()
      ]);
      
      setEmpleados(empleadosData);
      setPuestos(puestosData);
      setAreas(areasData);
      setSupervisores(empleadosData); // Todos pueden ser supervisores
      
      // Cargar tipos de trabajador
      const tiposResponse = await fetch('http://localhost:3001/api/vacaciones/tipos-trabajador');
      const tiposData = await tiposResponse.json();
      setTiposTrabajador(tiposData);
    } catch (error) {
      console.error('Error:', error);
    } finally {
      setLoading(false);
    }
  };

  const handleSubmit = async () => {
    try {
      const dataToSend = {
        dni: formData.dni,
        nombres: formData.nombres,
        apellidos: formData.apellidos,
        email: formData.email,
        telefono: formData.telefono,
        puesto_id: formData.puesto_id,
        area_id: formData.area_id,
        supervisor_id: formData.supervisor_id || null,
        tipo_trabajador_id: formData.tipo_trabajador_id || 1,
        fecha_ingreso: formData.fecha_ingreso,
        fecha_nacimiento: formData.fecha_nacimiento || null,
        direccion: formData.direccion || null,
        dias_vacaciones: formData.dias_vacaciones,
        activo: formData.activo
      };

      if (editingEmpleado) {
        await empleadosService.update(editingEmpleado.id, dataToSend);
      } else {
        await empleadosService.create({ 
          ...dataToSend, 
          password: formData.password || 'temp123', 
          rol: 'empleado' 
        });
      }
      
      await fetchData();
      handleCloseDialog();
    } catch (err) {
      console.error('Error:', err);
    }
  };

  return (
    &lt;Box sx={{ p: 3 }}&gt;
      &lt;Typography variant="h4"&gt;Gesti√≥n de Empleados&lt;/Typography&gt;
      
      {/* Dialog con formulario completo organizado en secciones */}
      &lt;Dialog open={openDialog} onClose={handleCloseDialog} maxWidth="lg" fullWidth&gt;
        &lt;DialogTitle&gt;
          {editingEmpleado ? 'Editar Empleado' : 'Nuevo Empleado'}
        &lt;/DialogTitle&gt;
        &lt;DialogContent dividers&gt;
          &lt;Grid container spacing={3}&gt;
            {/* Secci√≥n: Datos Personales */}
            &lt;Grid item xs={12}&gt;
              &lt;Typography variant="h6"&gt;üìã Datos Personales&lt;/Typography&gt;
            &lt;/Grid&gt;
            &lt;Grid item xs={12} sm={4}&gt;
              &lt;TextField label="DNI" name="dni" required /&gt;
            &lt;/Grid&gt;
            &lt;Grid item xs={12} sm={4}&gt;
              &lt;TextField label="Nombres" name="nombres" required /&gt;
            &lt;/Grid&gt;
            &lt;Grid item xs={12} sm={4}&gt;
              &lt;TextField label="Apellidos" name="apellidos" required /&gt;
            &lt;/Grid&gt;
            
            {/* Secci√≥n: Contacto */}
            &lt;Grid item xs={12}&gt;
              &lt;Typography variant="h6"&gt;üìû Contacto&lt;/Typography&gt;
            &lt;/Grid&gt;
            &lt;Grid item xs={12} sm={6}&gt;
              &lt;TextField label="Email" type="email" required disabled={!!editingEmpleado} /&gt;
            &lt;/Grid&gt;
            &lt;Grid item xs={12} sm={6}&gt;
              &lt;TextField label="Tel√©fono" /&gt;
            &lt;/Grid&gt;
            
            {/* Secci√≥n: Informaci√≥n Laboral */}
            &lt;Grid item xs={12}&gt;
              &lt;Typography variant="h6"&gt;üíº Informaci√≥n Laboral&lt;/Typography&gt;
            &lt;/Grid&gt;
            &lt;Grid item xs={12} sm={6}&gt;
              &lt;TextField select label="Puesto" required&gt;
                {puestos.map(p =&gt; &lt;MenuItem key={p.id} value={p.id}&gt;{p.nombre}&lt;/MenuItem&gt;)}
              &lt;/TextField&gt;
            &lt;/Grid&gt;
            &lt;Grid item xs={12} sm={6}&gt;
              &lt;TextField select label="√Årea" required&gt;
                {areas.map(a =&gt; &lt;MenuItem key={a.id} value={a.id}&gt;{a.nombre}&lt;/MenuItem&gt;)}
              &lt;/TextField&gt;
            &lt;/Grid&gt;
            &lt;Grid item xs={12} sm={6}&gt;
              &lt;TextField select label="Jefe Directo" helperText="Supervisor inmediato"&gt;
                &lt;MenuItem value=""&gt;Sin supervisor&lt;/MenuItem&gt;
                {supervisores.map(s =&gt; (
                  &lt;MenuItem key={s.id} value={s.id}&gt;
                    {s.nombres} {s.apellidos} - {s.puesto || 'Sin puesto'}
                  &lt;/MenuItem&gt;
                ))}
              &lt;/TextField&gt;
            &lt;/Grid&gt;
            &lt;Grid item xs={12} sm={6}&gt;
              &lt;TextField select label="Tipo de Trabajador" helperText="Define d√≠as de vacaciones"&gt;
                {tiposTrabajador.map(t =&gt; (
                  &lt;MenuItem key={t.id} value={t.id}&gt;
                    {t.nombre} ({t.dias_vacaciones} d√≠as)
                  &lt;/MenuItem&gt;
                ))}
              &lt;/TextField&gt;
            &lt;/Grid&gt;
          &lt;/Grid&gt;
        &lt;/DialogContent&gt;
        &lt;DialogActions&gt;
          &lt;Button onClick={handleCloseDialog}&gt;Cancelar&lt;/Button&gt;
          &lt;Button variant="contained" onClick={handleSubmit}&gt;
            {editingEmpleado ? 'Guardar Cambios' : 'Crear Empleado'}
          &lt;/Button&gt;
        &lt;/DialogActions&gt;
      &lt;/Dialog&gt;
      
      {/* Tabla con informaci√≥n completa */}
      &lt;DataGrid rows={empleados} columns={columns} loading={loading} /&gt;
    &lt;/Box&gt;
  );
}
</pre>
                    <strong>üìù Caracter√≠sticas clave del componente:</strong>
                    <ul>
                        <li><strong>Dialog expandido:</strong> maxWidth="lg" para mostrar todos los campos</li>
                        <li><strong>Formulario organizado:</strong> 4 secciones con iconos (Datos Personales, Contacto, Laboral, Credenciales)</li>
                        <li><strong>Dropdowns din√°micos:</strong> Carga puestos, √°reas, supervisores y tipos de trabajador desde API</li>
                        <li><strong>Validaciones:</strong> Email solo lectura al editar, campos requeridos marcados</li>
                        <li><strong>Tabla mejorada:</strong> Avatar con iniciales, c√≥digo empleado, tipo contrato, d√≠as vacaciones</li>
                        <li><strong>Switch RRHH:</strong> Permite asignar/remover rol directamente desde la tabla</li>
                    </ul>
                    </div>
                </div>

                <div class="content" id="database">
                    <h2>üíæ Base de Datos PostgreSQL</h2>

                    <h3>Esquema Principal</h3>
                    <table>
                        <tr>
                            <th>Tabla</th>
                            <th>Descripci√≥n</th>
                            <th>Registros</th>
                        </tr>
                        <tr>
                            <td><code class="code-inline">usuarios</code></td>
                            <td>Credenciales de acceso</td>
                            <td>8</td>
                        </tr>
                        <tr>
                            <td><code class="code-inline">empleados</code></td>
                            <td>Informaci√≥n de empleados</td>
                            <td>8</td>
                        </tr>
                        <tr>
                            <td><code class="code-inline">puestos</code></td>
                            <td>Cargos y salarios</td>
                            <td>15</td>
                        </tr>
                        <tr>
                            <td><code class="code-inline">areas</code></td>
                            <td>Departamentos</td>
                            <td>8</td>
                        </tr>
                        <tr>
                            <td><code class="code-inline">divisiones</code></td>
                            <td>Divisiones organizacionales</td>
                            <td>3</td>
                        </tr>
                        <tr>
                            <td><code class="code-inline">publicaciones</code></td>
                            <td>Boletines y anuncios</td>
                            <td>3</td>
                        </tr>
                        <tr>
                            <td><code class="code-inline">notificaciones</code></td>
                            <td>Sistema de alertas</td>
                            <td>3</td>
                        </tr>
                        <tr>
                            <td><code class="code-inline">solicitudes_vacaciones</code></td>
                            <td>Solicitudes de vacaciones</td>
                            <td>Variable</td>
                        </tr>
                        <tr>
                            <td><code class="code-inline">periodos_vacacionales</code></td>
                            <td>Per√≠odos de vacaciones</td>
                            <td>Variable</td>
                        </tr>
                        <tr>
                            <td><code class="code-inline">tipos_trabajador</code></td>
                            <td>Tipos de contrato</td>
                            <td>3</td>
                        </tr>
                        <tr>
                            <td><code class="code-inline">feriados</code></td>
                            <td>Feriados nacionales 2025</td>
                            <td>13</td>
                        </tr>
                    </table>

                    <h3>Diagrama de Relaciones</h3>
                    <div class="code-box">
<pre>
usuarios (1) ‚Üê‚Üí (1) empleados
    ‚Üì
empleados (N) ‚Üí (1) puestos
empleados (N) ‚Üí (1) areas
empleados (N) ‚Üí (1) divisiones
empleados (N) ‚Üí (1) empleados (supervisor)
    ‚Üì
empleados (1) ‚Üê‚Üí (N) solicitudes_vacaciones
empleados (1) ‚Üê‚Üí (N) periodos_vacacionales
empleados (1) ‚Üê‚Üí (N) notificaciones
    ‚Üì
tipos_trabajador (1) ‚Üê‚Üí (N) empleados
feriados (N) ‚Üê‚Üí validaciones en solicitudes_vacaciones
</pre>
                    </div>

                    <h3>Pool de Conexiones</h3>
                    <div class="code-box">
<pre>
// backend/src/db.js
import pg from 'pg';

const pool = new Pool({
  connectionString: process.env.DATABASE_URL,
  ssl: { rejectUnauthorized: false },
  max: 20,                    // M√°ximo de conexiones
  idleTimeoutMillis: 30000,   // Timeout idle
  connectionTimeoutMillis: 2000, // Timeout conexi√≥n
});

export const query = (text, params) => pool.query(text, params);
export default pool;
</pre>
                    </div>
                </div>

                <div class="content" id="apis">
                    <h2>üîå APIs y Endpoints</h2>

                    <h3>Autenticaci√≥n</h3>
                    <div class="endpoint-card">
                        <span class="method post">POST</span>
                        <code class="code-inline">/api/auth/login</code>
                        <p>Iniciar sesi√≥n y obtener JWT</p>
                        <div class="code-box">
<pre>
Body: { email, password }
Response: { token, user: { id, nombre, rol, empleadoId } }
</pre>
                        </div>
                    </div>

                    <div class="endpoint-card">
                        <span class="method post">POST</span>
                        <code class="code-inline">/api/auth/register</code>
                        <p>Registrar nuevo usuario</p>
                    </div>

                    <h3>Empleados</h3>
                    
                    <div class="info-box">
                        <strong>üÜï Actualizaci√≥n Enero 2026:</strong> Gesti√≥n completa de empleados con formulario expandido, manejo de supervisores jer√°rquicos y tipos de trabajador.
                    </div>

                    <div class="endpoint-card">
                        <span class="method get">GET</span>
                        <code class="code-inline">/api/empleados</code>
                        <p>Obtener todos los empleados con informaci√≥n completa</p>
                        <strong>Respuesta incluye:</strong>
                        <ul>
                            <li>Datos personales: DNI, nombres, apellidos, fecha_nacimiento, direccion</li>
                            <li>Contacto: email, telefono</li>
                            <li>Informaci√≥n laboral: puesto, area, supervisor, tipo_trabajador</li>
                            <li>Vacaciones: dias_vacaciones, dias_disponibles, dias_usados</li>
                            <li>Estado: activo, es_rrhh</li>
                        </ul>
                    </div>

                    <div class="endpoint-card">
                        <span class="method get">GET</span>
                        <code class="code-inline">/api/empleados/:id</code>
                        <p>Obtener empleado por ID con detalles completos</p>
                    </div>

                    <div class="endpoint-card">
                        <span class="method post">POST</span>
                        <code class="code-inline">/api/empleados</code>
                        <p>Crear nuevo empleado</p>
                        <strong>Body requerido:</strong>
                        <pre>{
  "dni": "12345678",
  "nombres": "Juan",
  "apellidos": "P√©rez Garc√≠a",
  "email": "juan.perez@agrovet.com",
  "telefono": "987654321",
  "puesto_id": 1,
  "area_id": 2,
  "supervisor_id": 10,           // Opcional, ID del jefe directo
  "tipo_trabajador_id": 1,       // 1=Indeterminado(30d), 2=Fijo(15d), 3=Pr√°cticas(0d)
  "fecha_ingreso": "2026-01-15",
  "fecha_nacimiento": "1990-05-20",  // Opcional
  "direccion": "Av. Principal 123",  // Opcional
  "dias_vacaciones": 30,
  "password": "temporal123",
  "activo": true
}</pre>
                        <strong>‚ö†Ô∏è Validaciones:</strong>
                        <ul>
                            <li>DNI √∫nico en el sistema</li>
                            <li>Email √∫nico (se usa para login)</li>
                            <li>Puesto y √°rea deben existir y estar activos</li>
                            <li>Supervisor debe ser un empleado v√°lido</li>
                            <li>Password m√≠nimo 6 caracteres</li>
                        </ul>
                    </div>

                    <div class="endpoint-card">
                        <span class="method put">PUT</span>
                        <code class="code-inline">/api/empleados/:id</code>
                        <p>Actualizar empleado</p>
                        <strong>Body permitido (todos opcionales):</strong>
                        <pre>{
  "dni": "12345678",
  "nombres": "Juan Carlos",
  "apellidos": "P√©rez Garc√≠a",
  "telefono": "987654321",
  "puesto_id": 5,                // Cambio de puesto (promoci√≥n)
  "area_id": 3,                  // Cambio de √°rea (traslado)
  "supervisor_id": 15,           // Cambio de supervisor (reestructuraci√≥n)
  "tipo_trabajador_id": 1,       // Cambio de tipo de contrato
  "fecha_ingreso": "2026-01-15",
  "fecha_nacimiento": "1990-05-20",
  "direccion": "Nueva direcci√≥n",
  "dias_vacaciones": 30,
  "activo": false                // Desactivar empleado
}</pre>
                        <strong>üìù Notas:</strong>
                        <ul>
                            <li>El campo <code>email</code> NO se puede modificar</li>
                            <li>Se actualizan solo los campos enviados (PATCH-like behavior)</li>
                            <li>supervisor_id puede ser null para remover supervisor</li>
                        </ul>
                    </div>

                    <div class="endpoint-card">
                        <span class="method patch">PATCH</span>
                        <code class="code-inline">/api/empleados/:id/rrhh</code>
                        <p>Asignar o remover rol de RRHH</p>
                        <strong>Body:</strong>
                        <pre>{
  "es_rrhh": true  // o false
}</pre>
                    </div>

                    <div class="endpoint-card">
                        <span class="method delete">DELETE</span>
                        <code class="code-inline">/api/empleados/:id</code>
                        <p>Desactivar empleado (soft delete)</p>
                        <p>Cambia el estado <code>activo</code> a <code>false</code>. No elimina datos.</p>
                    </div>

                    <div class="endpoint-card">
                        <span class="method get">GET</span>
                        <code class="code-inline">/api/empleados/puestos</code>
                        <p>Obtener lista de puestos activos para formularios</p>
                    </div>

                    <div class="endpoint-card">
                        <span class="method get">GET</span>
                        <code class="code-inline">/api/empleados/areas</code>
                        <p>Obtener lista de √°reas activas para formularios</p>
                    </div>

                    <h4>üí° Casos de Uso Comunes</h4>
                    <div class="code-box">
<pre>// 1. Promoci√≥n de empleado
PUT /api/empleados/15
{
  "puesto_id": 8,  // Nuevo puesto superior
  "dias_vacaciones": 35  // Ajuste por antig√ºedad
}

// 2. Cambio de √°rea con nuevo supervisor
PUT /api/empleados/20
{
  "area_id": 4,
  "supervisor_id": 25
}

// 3. Cambio de contrato (temporal a indefinido)
PUT /api/empleados/12
{
  "tipo_trabajador_id": 1,  // De 2 (Fijo) a 1 (Indeterminado)
  "dias_vacaciones": 30      // Aumentar de 15 a 30 d√≠as
}

// 4. Reestructuraci√≥n organizacional
PUT /api/empleados/30
{
  "supervisor_id": 18  // Nuevo jefe directo
}
</pre>
                    </div>

                    <h3>Vacaciones</h3>
                    <div class="endpoint-card">
                        <span class="method get">GET</span>
                        <code class="code-inline">/api/vacaciones/historial</code>
                        <p>Historial de solicitudes (con paginaci√≥n y filtros)</p>
                    </div>

                    <div class="endpoint-card">
                        <span class="method get">GET</span>
                        <code class="code-inline">/api/vacaciones/control-rrhh</code>
                        <p>Dashboard de control para RRHH</p>
                    </div>

                    <div class="endpoint-card">
                        <span class="method post">POST</span>
                        <code class="code-inline">/api/vacaciones/solicitar</code>
                        <p>Crear solicitud de vacaciones</p>
                    </div>

                    <h3>Publicaciones</h3>
                    <div class="endpoint-card">
                        <span class="method get">GET</span>
                        <code class="code-inline">/api/publicaciones</code>
                        <p>Obtener todas las publicaciones</p>
                    </div>

                    <div class="endpoint-card">
                        <span class="method post">POST</span>
                        <code class="code-inline">/api/publicaciones</code>
                        <p>Crear nueva publicaci√≥n</p>
                    </div>

                    <h3>Notificaciones</h3>
                    <div class="endpoint-card">
                        <span class="method get">GET</span>
                        <code class="code-inline">/api/notificaciones/:userId</code>
                        <p>Obtener notificaciones de usuario</p>
                    </div>

                    <div class="endpoint-card">
                        <span class="method post">POST</span>
                        <code class="code-inline">/api/notificaciones</code>
                        <p>Crear notificaci√≥n</p>
                    </div>

                    <div class="endpoint-card">
                        <span class="method put">PUT</span>
                        <code class="code-inline">/api/notificaciones/:id/marcar-leida</code>
                        <p>Marcar como le√≠da</p>
                    </div>
                </div>

                <div class="content" id="autenticacion">
                    <h2>üîê Sistema de Autenticaci√≥n</h2>

                    <h3>Flujo de Autenticaci√≥n</h3>
                    <div class="code-box">
<pre>
1. Usuario env√≠a credenciales (email + password)
2. Backend verifica en tabla usuarios
3. Compara password con bcrypt.compare()
4. Si es correcto, genera JWT token
5. Token incluye: { userId, empleadoId, rol }
6. Frontend guarda token en localStorage
7. Todas las requests incluyen: Authorization: Bearer {token}
8. Middleware verifica token en cada request
9. Si token es v√°lido, permite acceso
10. Si token expira, redirige a login
</pre>
                    </div>

                    <h3>Generaci√≥n de Token JWT</h3>
                    <div class="code-box">
<pre>
// backend/src/controllers/auth.controller.js
const token = jwt.sign(
  {
    userId: user.id,
    empleadoId: user.empleado_id,
    email: user.email,
    rol: user.rol
  },
  process.env.JWT_SECRET,
  { expiresIn: '24h' }
);
</pre>
                    </div>

                    <h3>Hash de Contrase√±as</h3>
                    <div class="code-box">
<pre>
// Al crear usuario
const hashedPassword = await bcrypt.hash(password, 10);

// Al verificar login
const isValid = await bcrypt.compare(password, user.password_hash);
</pre>
                    </div>

                    <h3>Interceptor de Axios (Frontend)</h3>
                    <div class="code-box">
<pre>
// src/services/api.js
import axios from 'axios';

const api = axios.create({
  baseURL: import.meta.env.VITE_API_URL || 'http://localhost:3001/api',
});

// Agregar token en cada request
api.interceptors.request.use((config) => {
  const token = localStorage.getItem('token');
  if (token) {
    config.headers.Authorization = `Bearer ${token}`;
  }
  return config;
});

// Manejar errores 401 (no autorizado)
api.interceptors.response.use(
  (response) => response,
  (error) => {
    if (error.response?.status === 401) {
      localStorage.removeItem('token');
      window.location.href = '/login';
    }
    return Promise.reject(error);
  }
);

export default api;
</pre>
                    </div>
                </div>

                <div class="content" id="deployment">
                    <h2>üöÄ Deployment</h2>

                    <h3>Variables de Entorno</h3>
                    
                    <h4>Backend (.env)</h4>
                    <div class="code-box">
<pre>
NODE_ENV=production
PORT=3001
DATABASE_URL=postgresql://user:password@host:5432/database
JWT_SECRET=your_super_secret_key_change_in_production
JWT_EXPIRES_IN=24h
CORS_ORIGIN=https://yourdomain.com
</pre>
                    </div>

                    <h4>Frontend (.env)</h4>
                    <div class="code-box">
<pre>
VITE_API_URL=http://localhost:3001/api
</pre>
                    </div>

                    <h3>Build para Producci√≥n</h3>
                    <div class="code-box">
<pre>
# Frontend
npm run build
# Genera carpeta dist/ optimizada

# Backend
npm start
# Ejecuta node src/server.js
</pre>
                    </div>

                    <h3>Render.com Deployment</h3>
                    
                    <div class="feature-box">
                        <h4>PostgreSQL Database</h4>
                        <ul>
                            <li><strong>Region:</strong> Oregon (US West)</li>
                            <li><strong>Plan:</strong> Free Tier</li>
                            <li><strong>SSL:</strong> Habilitado</li>
                            <li><strong>Backups:</strong> Autom√°ticos diarios</li>
                        </ul>
                    </div>

                    <div class="feature-box">
                        <h4>Backend (Web Service)</h4>
                        <ul>
                            <li><strong>Build Command:</strong> <code class="code-inline">npm install</code></li>
                            <li><strong>Start Command:</strong> <code class="code-inline">npm start</code></li>
                            <li><strong>Environment:</strong> Node.js</li>
                            <li><strong>Auto-deploy:</strong> main branch</li>
                        </ul>
                    </div>

                    <div class="feature-box">
                        <h4>Frontend (Static Site)</h4>
                        <ul>
                            <li><strong>Build Command:</strong> <code class="code-inline">npm run build</code></li>
                            <li><strong>Publish Directory:</strong> <code class="code-inline">dist</code></li>
                            <li><strong>Framework:</strong> Vite</li>
                        </ul>
                    </div>
                </div>

                <div class="content" id="desarrollo">
                    <h2>üíª Gu√≠a de Desarrollo</h2>

                    <h3>Setup Inicial</h3>
                    <div class="code-box">
<pre>
# 1. Clonar repositorio
git clone https://github.com/jonathancerda-hub/AgrovetConectAH.git
cd AgrovetConectAH

# 2. Instalar dependencias Frontend
npm install

# 3. Instalar dependencias Backend
cd backend
npm install

# 4. Configurar variables de entorno
# Crear .env en ra√≠z y en backend/

# 5. Iniciar desarrollo
# Terminal 1 - Backend
cd backend
npm run dev

# Terminal 2 - Frontend
npm run dev
</pre>
                    </div>

                    <h3>Agregar Nueva Funcionalidad</h3>
                    
                    <div class="success-box">
                        <h4>üìå Checklist de Desarrollo</h4>
                        <ol>
                            <li>‚úÖ Crear migraci√≥n SQL si es necesario</li>
                            <li>‚úÖ Crear controller en backend/src/controllers/</li>
                            <li>‚úÖ Agregar ruta en backend/src/routes/</li>
                            <li>‚úÖ Crear service en src/services/</li>
                            <li>‚úÖ Crear component en src/features/</li>
                            <li>‚úÖ Agregar al men√∫ en App.jsx</li>
                            <li>‚úÖ Probar en desarrollo</li>
                            <li>‚úÖ Documentar en manual de usuario</li>
                        </ol>
                    </div>

                    <h3>Ejemplo: Agregar M√≥dulo de N√≥mina</h3>
                    
                    <h4>1. Migraci√≥n SQL</h4>
                    <div class="code-box">
<pre>
-- database/migrations/08_nomina.sql
CREATE TABLE nominas (
  id SERIAL PRIMARY KEY,
  empleado_id INT REFERENCES empleados(id),
  periodo VARCHAR(20) NOT NULL,
  salario_base DECIMAL(10,2),
  bonos DECIMAL(10,2),
  descuentos DECIMAL(10,2),
  total DECIMAL(10,2),
  created_at TIMESTAMP DEFAULT NOW()
);
</pre>
                    </div>

                    <h4>2. Backend Controller</h4>
                    <div class="code-box">
<pre>
// backend/src/controllers/nomina.controller.js
export const getNominas = async (req, res) => {
  try {
    const result = await query(`
      SELECT n.*, e.nombres, e.apellidos
      FROM nominas n
      JOIN empleados e ON n.empleado_id = e.id
      ORDER BY n.created_at DESC
    `);
    res.json(result.rows);
  } catch (error) {
    res.status(500).json({ error: error.message });
  }
};
</pre>
                    </div>

                    <h4>3. Backend Route</h4>
                    <div class="code-box">
<pre>
// backend/src/routes/nomina.routes.js
import { Router } from 'express';
import { getNominas } from '../controllers/nomina.controller.js';
import { authenticateToken } from '../middleware/auth.js';

const router = Router();
router.get('/', authenticateToken, getNominas);

export default router;
</pre>
                    </div>

                    <h4>4. Frontend Service</h4>
                    <div class="code-box">
<pre>
// src/services/nomina.service.js
import api from './api';

export const nominaService = {
  getAll: async () => {
    const response = await api.get('/nomina');
    return response.data;
  },
};
</pre>
                    </div>

                    <h4>5. Frontend Component</h4>
                    <div class="code-box">
<pre>
// src/features/nomina/GestionNomina.jsx
import { useState, useEffect } from 'react';
import { nominaService } from '../../services/nomina.service';

export default function GestionNomina() {
  const [nominas, setNominas] = useState([]);

  useEffect(() => {
    loadData();
  }, []);

  const loadData = async () => {
    const data = await nominaService.getAll();
    setNominas(data);
  };

  return (
    &lt;Box sx={{ p: 3 }}&gt;
      &lt;Typography variant="h4"&gt;Gesti√≥n de N√≥mina&lt;/Typography&gt;
      {/* Tabla aqu√≠ */}
    &lt;/Box&gt;
  );
}
</pre>
                    </div>

                    <h3>Debugging Tips</h3>
                    <div class="warning-box">
                        <h4>üêõ Problemas Comunes</h4>
                        <ul>
                            <li><strong>CORS Error:</strong> Verificar CORS_ORIGIN en .env del backend</li>
                            <li><strong>401 Unauthorized:</strong> Token expirado o inv√°lido, hacer login nuevamente</li>
                            <li><strong>500 Server Error:</strong> Ver logs del backend, probablemente query SQL</li>
                            <li><strong>Port in use:</strong> Matar proceso con <code class="code-inline">Stop-Process</code></li>
                            <li><strong>Cannot find module:</strong> Ejecutar <code class="code-inline">npm install</code></li>
                        </ul>
                    </div>

                    <h3>Testing</h3>
                    <div class="info-box">
                        <h4>üß™ Estrategia de Testing</h4>
                        <ul>
                            <li><strong>Manual Testing:</strong> Probar cada endpoint con Postman/Thunder Client</li>
                            <li><strong>Frontend:</strong> React Developer Tools para inspeccionar estado</li>
                            <li><strong>Database:</strong> Verificar datos con DBeaver o pgAdmin</li>
                            <li><strong>Logs:</strong> console.log en desarrollo, Winston en producci√≥n</li>
                        </ul>
                    </div>
                </div>

                <div class="content">
                    <h2>üìö Recursos Adicionales</h2>
                    
                    <div class="grid-2">
                        <div class="tech-card">
                            <h4>üìñ Documentaci√≥n Oficial</h4>
                            <ul>
                                <li><a href="https://react.dev" style="color: #00d9ff;">React Documentation</a></li>
                                <li><a href="https://mui.com" style="color: #00d9ff;">Material-UI</a></li>
                                <li><a href="https://expressjs.com" style="color: #00d9ff;">Express.js</a></li>
                                <li><a href="https://www.postgresql.org/docs/" style="color: #00d9ff;">PostgreSQL</a></li>
                            </ul>
                        </div>

                        <div class="tech-card">
                            <h4>üõ†Ô∏è Herramientas</h4>
                            <ul>
                                <li>VS Code Extensions: ES7 React snippets, ESLint</li>
                                <li>Postman para testing de APIs</li>
                                <li>DBeaver para gesti√≥n de BD</li>
                                <li>Git Extensions para control de versiones</li>
                            </ul>
                        </div>
                    </div>

                    <h3>üìû Contacto del Equipo de Desarrollo</h3>
                    <div class="info-box">
                        <p><strong>Email:</strong> desarrollo.ti@agrovetmarket.pe</p>
                        <p><strong>GitHub:</strong> https://github.com/jonathancerda-hub/AgrovetConectAH</p>
                        <p><strong>Documentaci√≥n:</strong> /docs en el repositorio</p>
                    </div>
                </div>

                <!-- SECCI√ìN NUEVA: L√ìGICA DE REGLAS Y ESTADOS -->
                <div class="content">
                    <h2>üßÆ L√≥gica de Reglas de Vacaciones y Estados</h2>
                    
                    <h3>Sistema de Alertas y Estados</h3>
                    <div class="info-box">
                        <h4>üéØ Objetivo del Sistema</h4>
                        <p>El sistema de alertas est√° dise√±ado para garantizar que los empleados programen sus vacaciones <strong>ANTES</strong> de cumplir otro a√±o laboral (cuando generan 30 d√≠as adicionales). Esto evita acumulaci√≥n excesiva y problemas de planificaci√≥n.</p>
                    </div>

                    <h3>C√°lculo de D√≠as Sin Programar</h3>
                    <div class="code-block">
<pre><code class="language-javascript">// backend/src/controllers/vacaciones.controller.js
// Control RRHH - Query SQL

SELECT 
  e.id as empleado_id,
  e.fecha_ingreso,  // CLAVE para calcular aniversario
  e.nombres || ' ' || e.apellidos as nombre_completo,
  COALESCE(SUM(pv.dias_disponibles), 0) as dias_disponibles,
  COALESCE(
    (SELECT SUM(dias_solicitados) 
     FROM solicitudes_vacaciones sv 
     WHERE sv.empleado_id = e.id 
       AND sv.estado = 'aprobada'
       AND sv.fecha_fin >= CURRENT_DATE
    ), 0
  ) as dias_programados
FROM empleados e
LEFT JOIN periodos_vacacionales pv ON e.id = pv.empleado_id 
  AND pv.estado = 'activo'
WHERE e.activo = true
GROUP BY e.id, e.fecha_ingreso, e.nombres, e.apellidos;

// D√≠as sin programar = dias_disponibles - dias_programados</code></pre>
                    </div>

                    <h3>Algoritmo de Estados (Frontend)</h3>
                    <div class="code-block">
<pre><code class="language-javascript">// DashboardRRHH.jsx & ControlVacacionesEmpleado.jsx
// Funci√≥n getAlertaChip() / getEstadoEmpleado()

const getAlertaChip = (empleado) => {
  const diasDisponibles = empleado.dias_disponibles || 0;
  const diasProgramados = empleado.dias_programados || 0;
  const diasSinProgramar = diasDisponibles - diasProgramados;
  
  // 1. Calcular d√≠as hasta pr√≥ximo aniversario
  let diasHastaAniversario = null;
  if (empleado.fecha_ingreso) {
    const fechaIngreso = new Date(empleado.fecha_ingreso);
    const hoy = new Date();
    
    // Pr√≥ximo aniversario en el a√±o actual o siguiente
    let proximoAniversario = new Date(
      hoy.getFullYear(), 
      fechaIngreso.getMonth(), 
      fechaIngreso.getDate()
    );
    
    if (proximoAniversario < hoy) {
      proximoAniversario = new Date(
        hoy.getFullYear() + 1, 
        fechaIngreso.getMonth(), 
        fechaIngreso.getDate()
      );
    }
    
    diasHastaAniversario = Math.ceil(
      (proximoAniversario - hoy) / (1000 * 60 * 60 * 24)
    );
  }
  
  // 2. Evaluar urgencia combinando d√≠as sin programar + tiempo
  
  // üî¥ CR√çTICO: ‚â•15 d√≠as sin programar Y ‚â§60 d√≠as hasta aniversario
  if (diasSinProgramar >= 15 && diasHastaAniversario !== null && diasHastaAniversario <= 60) {
    return &lt;Chip label="Cr√≠tico" color="error" /&gt;;
  }
  
  // üü° ADVERTENCIA: ‚â•10 d√≠as sin programar Y ‚â§120 d√≠as hasta aniversario
  if (diasSinProgramar >= 10 && diasHastaAniversario !== null && diasHastaAniversario <= 120) {
    return &lt;Chip label="Pendiente" color="warning" /&gt;;
  }
  
  // üü° ACUMULADO: ‚â•20 d√≠as sin programar (sin importar tiempo)
  if (diasSinProgramar >= 20) {
    return &lt;Chip label="Acumulado" color="warning" /&gt;;
  }
  
  // üü¢ OK: Todo programado o pocos d√≠as pendientes
  return &lt;Chip label="OK" color="success" /&gt;;
};</code></pre>
                    </div>

                    <h3>Tabla de Estados y Criterios</h3>
                    <div class="warning-box">
                        <table style="width: 100%; border-collapse: collapse; margin-top: 10px;">
                            <thead>
                                <tr style="background: rgba(233, 69, 96, 0.2);">
                                    <th style="padding: 10px; border: 1px solid #0f3460;">Estado</th>
                                    <th style="padding: 10px; border: 1px solid #0f3460;">Color</th>
                                    <th style="padding: 10px; border: 1px solid #0f3460;">Condici√≥n</th>
                                    <th style="padding: 10px; border: 1px solid #0f3460;">Significado</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td style="padding: 10px; border: 1px solid #0f3460;"><strong>üî¥ Cr√≠tico</strong></td>
                                    <td style="padding: 10px; border: 1px solid #0f3460;">Rojo (error)</td>
                                    <td style="padding: 10px; border: 1px solid #0f3460;">‚â•15 d√≠as sin programar Y ‚â§60 d√≠as hasta aniversario</td>
                                    <td style="padding: 10px; border: 1px solid #0f3460;"><strong>Urgente:</strong> Debe programar INMEDIATAMENTE o acumular√° 30 d√≠as m√°s</td>
                                </tr>
                                <tr style="background: rgba(255, 255, 255, 0.05);">
                                    <td style="padding: 10px; border: 1px solid #0f3460;"><strong>üü° Pendiente</strong></td>
                                    <td style="padding: 10px; border: 1px solid #0f3460;">Amarillo (warning)</td>
                                    <td style="padding: 10px; border: 1px solid #0f3460;">‚â•10 d√≠as sin programar Y ‚â§120 d√≠as hasta aniversario</td>
                                    <td style="padding: 10px; border: 1px solid #0f3460;"><strong>Advertencia:</strong> Tiene 2-4 meses para programar, debe empezar a planificar</td>
                                </tr>
                                <tr>
                                    <td style="padding: 10px; border: 1px solid #0f3460;"><strong>üü° Acumulado</strong></td>
                                    <td style="padding: 10px; border: 1px solid #0f3460;">Amarillo (warning)</td>
                                    <td style="padding: 10px; border: 1px solid #0f3460;">‚â•20 d√≠as sin programar (independiente del tiempo)</td>
                                    <td style="padding: 10px; border: 1px solid #0f3460;"><strong>Acumulaci√≥n alta:</strong> Demasiados d√≠as pendientes, riesgo de perderlos</td>
                                </tr>
                                <tr style="background: rgba(255, 255, 255, 0.05);">
                                    <td style="padding: 10px; border: 1px solid #0f3460;"><strong>üü¢ OK / Disponible</strong></td>
                                    <td style="padding: 10px; border: 1px solid #0f3460;">Verde (success)</td>
                                    <td style="padding: 10px; border: 1px solid #0f3460;">&lt;10 d√≠as sin programar o todo programado</td>
                                    <td style="padding: 10px; border: 1px solid #0f3460;"><strong>Normal:</strong> Est√° gestionando correctamente sus vacaciones</td>
                                </tr>
                                <tr>
                                    <td style="padding: 10px; border: 1px solid #0f3460;"><strong>‚ö´ Agotado</strong></td>
                                    <td style="padding: 10px; border: 1px solid #0f3460;">Rojo (error)</td>
                                    <td style="padding: 10px; border: 1px solid #0f3460;">0 d√≠as disponibles</td>
                                    <td style="padding: 10px; border: 1px solid #0f3460;"><strong>Sin d√≠as:</strong> Ya us√≥ todos sus d√≠as del per√≠odo</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <h3>C√°lculo de Fines de Semana</h3>
                    <div class="code-block">
<pre><code class="language-javascript">// backend/src/controllers/vacaciones.controller.js
// Funci√≥n: contarDiasEspeciales()

const contarDiasEspeciales = (fechaInicio, fechaFin) => {
  const inicio = new Date(fechaInicio + 'T00:00:00');
  const fin = new Date(fechaFin + 'T00:00:00');
  
  let viernes = 0;
  let sabados = 0;
  let domingos = 0;
  
  let fecha = new Date(inicio);
  while (fecha <= fin) {
    const diaSemana = fecha.getDay(); // 0=Domingo, 6=S√°bado
    if (diaSemana === 5) viernes++;
    else if (diaSemana === 6) sabados++;
    else if (diaSemana === 0) domingos++;
    fecha.setDate(fecha.getDate() + 1);
  }
  
  // REGLA: Un fin de semana = S√°bado + Domingo juntos
  // Se cuenta el m√≠nimo entre s√°bados y domingos
  const finesDeSemana = Math.min(sabados, domingos);
  
  return { viernes, sabados, domingos, finesDeSemana };
};

// EJEMPLO:
// Solicitud: 4/2/2026 (viernes) - 7/2/2026 (domingo)
// Resultado: { viernes: 1, sabados: 1, domingos: 1, finesDeSemana: 1 }
// NO se cuenta como 2 d√≠as de fin de semana, sino como 1 fin de semana completo</code></pre>
                    </div>

                    <h3>Sistema de Feriados Din√°micos</h3>
                    <div class="info-box">
                        <h4>üìÖ Gesti√≥n de Feriados</h4>
                        <p>El sistema permite gestionar feriados nacionales, regionales y festivos desde el Dashboard RRHH:</p>
                        <ul>
                            <li><strong>Tabla:</strong> <code class="code-inline">feriados</code></li>
                            <li><strong>Campos:</strong> id, fecha (unique), nombre, tipo (nacional/regional/festivo), pais, anio, fecha_creacion</li>
                            <li><strong>Endpoints:</strong> GET/POST/PUT/DELETE /api/feriados</li>
                            <li><strong>Validaci√≥n:</strong> Previene puente de feriados (‚â§7 d√≠as entre solicitudes)</li>
                        </ul>
                    </div>

                    <div class="code-block">
<pre><code class="language-javascript">// backend/src/services/vacaciones.service.js
// Validar puenteo de feriados

export const validarPuenteoFeriados = async (solicitudData) => {
  const { empleado_id, fecha_inicio, fecha_fin } = solicitudData;
  
  // Buscar solicitudes aprobadas cercanas (‚â§7 d√≠as de separaci√≥n)
  const query = `
    SELECT fecha_inicio, fecha_fin 
    FROM solicitudes_vacaciones 
    WHERE empleado_id = $1 
      AND estado = 'aprobada'
      AND (
        fecha_fin >= $2 - INTERVAL '7 days' AND fecha_fin < $2
        OR fecha_inicio > $3 AND fecha_inicio <= $3 + INTERVAL '7 days'
      )
  `;
  
  const solicitudesCercanas = await db.query(query, [empleado_id, fecha_inicio, fecha_fin]);
  
  if (solicitudesCercanas.rows.length > 0) {
    // Verificar si hay feriados entre las solicitudes
    const feriadosQuery = `
      SELECT fecha, nombre 
      FROM feriados 
      WHERE fecha > $1 AND fecha < $2
    `;
    
    const feriados = await db.query(feriadosQuery, [fecha_fin_anterior, fecha_inicio]);
    
    if (feriados.rows.length > 0) {
      return {
        valida: false,
        mensaje: `No se permite puentear feriados (${feriados.rows[0].nombre}). 
                 Debe incluir estos d√≠as en su solicitud o esperar.`
      };
    }
  }
  
  return { valida: true };
};</code></pre>
                    </div>

                    <h3>Contador de Alertas en Dashboard</h3>
                    <div class="code-block">
<pre><code class="language-javascript">// DashboardRRHH.jsx - Resumen de alertas

&lt;Box sx={{ display: 'flex', gap: 1.5, mb: 2, bgcolor: 'grey.50', p: 1.5 }}&gt;
  &lt;Typography variant="body2" fontWeight={600}&gt;
    Resumen de Alertas:
  &lt;/Typography&gt;
  
  &lt;Chip 
    icon={&lt;WarningAmberIcon /&gt;}
    label={`Cr√≠tico: ${filteredEmpleados.filter(emp => {
      const chip = getAlertaChip(emp);
      return chip.props.label === 'Cr√≠tico';
    }).length}`}
    color="error" 
    size="small"
  /&gt;
  
  &lt;Chip 
    label={`Pendiente: ${/* contador */}`}
    color="warning"
  /&gt;
  
  &lt;Chip 
    label={`Acumulado: ${/* contador */}`}
    color="warning"
  /&gt;
  
  &lt;Chip 
    label={`OK: ${/* contador */}`}
    color="success"
  /&gt;
&lt;/Box&gt;

// Muestra contadores din√°micos seg√∫n empleados filtrados</code></pre>
                    </div>

                    <h3>Reglas de Negocio Implementadas</h3>
                    <div class="warning-box">
                        <h4>üìã Reglas Activas del Sistema</h4>
                        <ol style="margin-left: 20px; margin-top: 10px;">
                            <li><strong>D√≠as M√≠nimos:</strong> M√≠nimo 3 d√≠as consecutivos por solicitud (salida anticipada)</li>
                            <li><strong>D√≠as Disponibles:</strong> No puede solicitar m√°s d√≠as de los disponibles</li>
                            <li><strong>Cruces de Fechas:</strong> No permite solapamiento con solicitudes existentes del mismo empleado</li>
                            <li><strong>Fin de Semana Completo:</strong> S√°bado + Domingo = 1 fin de semana (no 2)</li>
                            <li><strong>Anti-Puente Feriados:</strong> Si solicitudes est√°n a ‚â§7 d√≠as con feriados entre medio, debe incluirlos</li>
                            <li><strong>Fecha Ingreso:</strong> Nuevos empleados (&lt;1 a√±o) tienen per√≠odo proporcional</li>
                            <li><strong>Alertas Temporales:</strong> Aumenta urgencia seg√∫n proximidad a aniversario laboral</li>
                            <li><strong>Feriados Din√°micos:</strong> Se cargan desde BD, no hardcodeados</li>
                        </ol>
                    </div>

                    <h3>Flujo de Estados de Solicitud</h3>
                    <div class="info-box">
<pre style="color: #00d9ff; font-size: 0.9em; line-height: 1.8;">
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Pendiente  ‚îÇ ‚Üê Estado inicial al crear solicitud
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
       ‚îÇ
       ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚Üí ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
       ‚îÇ        ‚îÇ  Aprobada  ‚îÇ ‚Üê Jefe/RRHH aprueba
       ‚îÇ        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
       ‚îÇ               ‚îÇ
       ‚îÇ               ‚îî‚îÄ‚îÄ‚Üí Cuenta para "Programados" si fecha_fin >= hoy
       ‚îÇ
       ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚Üí ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                ‚îÇ  Rechazada  ‚îÇ ‚Üê Jefe/RRHH rechaza (con motivo)
                ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

Estados adicionales:
- Completada: Fecha fin ya pas√≥ (hist√≥rico)
- Cancelada: Empleado cancela antes de gozar
</pre>
                    </div>

                    <h3>Optimizaciones Recientes</h3>
                    <div class="tech-card" style="margin-top: 20px;">
                        <h4>üöÄ Mejoras Implementadas</h4>
                        <ul>
                            <li><strong>Sistema de Alertas Inteligente:</strong> Considera tiempo hasta aniversario + d√≠as acumulados</li>
                            <li><strong>C√°lculo Correcto de Fines de Semana:</strong> Pareja s√°bado-domingo = 1 fin de semana</li>
                            <li><strong>Feriados Din√°micos:</strong> Gestionables desde UI, no requiere c√≥digo</li>
                            <li><strong>Contador de Alertas:</strong> Resumen visual en Dashboard RRHH</li>
                            <li><strong>Excel Export Profesional:</strong> Control + Historial con 2 hojas</li>
                            <li><strong>Filtros Mejorados:</strong> Por estado, √°rea, nombre con emojis visuales</li>
                            <li><strong>Columnas Programados/Pendientes:</strong> Con tooltips explicativos</li>
                            <li><strong>Bot√≥n B√∫squeda Eliminado:</strong> Funcionalidad no implementada removida</li>
                        </ul>
                    </div>
                </div>

            </main>
        </div>

        <footer>
            <p><strong>AgrovetConectAH</strong> | Technical Documentation</p>
            <p>Desarrollado por el Equipo de TI | Stack: React + Node.js + PostgreSQL</p>
            <p style="margin-top: 15px; font-size: 0.9em;">
                Build: 2026.01.23 | v1.2.0 | Environment: Production
            </p>
        </footer>
    </div>
</body>
</html>
